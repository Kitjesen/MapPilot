# MapPilot API Reference

> ???????????????? gRPC ?? API?ROS2 ?????????????
> ????: 2026-02-13

---

## ??

- [1. ????](#1-????)
- [2. gRPC ??](#2-grpc-??)
    - [2.1 SystemService ? ?????????](#21-systemservice--?????????)
    - [2.2 ControlService ? ???????](#22-controlservice--???????)
    - [2.3 TelemetryService ? ???????](#23-telemetryservice--???????)
    - [2.4 DataService ? ?????????](#24-dataservice--?????????)
    - [2.5 OtaService ? OTA ???????](#25-otaservice--ota-???????)
- [3. ROS2 ?? (???????)](#3-ros2-??-???????)
- [4. ROS2 ?? (???????)](#4-ros2-??-???????)
- [5. ?????????](#5-?????????)
- [6. ?????](#6-?????)
- [7. ?????](#7-?????)
- [8. ??? SDK ??](#8-???-sdk-??)

---

## 1. ????

```
???????????????????????????????????????????????????????????????????
?                    Flutter App / ???????                    ?
???????????????????????????????????????????????????????????????????
?  gRPC       ?                         ?  gRPC                   ?
?  :50051     ?                         ?  :50052                 ?
?             ?                         ?             ?           ?
? ???????????????????????              ? ?????????????????????????
? ? grpc_gateway :50051 ?              ? ? ota_daemon :50052    ??
? ? (ROS2 ??)         ?              ? ? (??????, ? ROS2)??
? ?                     ?              ? ?                      ??
? ? ? SystemService     ?              ? ? ? OtaService         ??
? ? ? ControlService    ?              ? ?   - ??????      ??
? ? ? TelemetryService  ?              ? ?   - OTA ????      ??
? ? ? DataService       ?              ? ?   - ????          ??
? ?   - ?????      ?              ? ?   - systemd ??      ??
? ?   - WebRTC ??     ?              ? ?                      ??
? ???????????????????????              ? ?????????????????????????
? ? ROS2                ?              ? systemctl               ?
? ???????????????????????????????????????                         ?
? ??????????????????????????????????????????????????????????????????
? ?                     ???? (ROS2 Nodes)                      ??
? ?  fastlio2 ? localizer/pgo ? terrain_analysis                  ??
? ?  ? local_planner ? pathFollower ? robot_driver                ??
? ??????????????????????????????????????????????????????????????????
???????????????????????????????????????????????????????????????????
```

| ??/?? | ???? | ?? | ???? |
|-----------|---------|------|---------|
| **50051** | grpc_gateway | ROS2, navigation.service | ????/??/???? |
| **50052** | ota_daemon | ? | **????????** (???????) |

---

## 2. gRPC ??

Proto ?: `robot.v1`
Proto ???: `src/robot_proto/proto/`

### 2.1 SystemService ? ?????????

**Proto**: `system.proto`
**??**: 50051 (grpc_gateway)
**??**: ?????????????????????????????????

| # | RPC | ???? | ?? | ?? | ?? |
|---|-----|---------|------|------|------|
| 1 | `Login` | Unary | `LoginRequest` | `LoginResponse` | ???? session_token |
| 2 | `Logout` | Unary | `LogoutRequest` | `LogoutResponse` | ????? session (???? lease) |
| 3 | `Heartbeat` | Unary | `HeartbeatRequest` | `HeartbeatResponse` | ????????????session ?? |
| 4 | `GetRobotInfo` | Unary | `Empty` | `RobotInfoResponse` | ????? ID/??/????/???? |
| 5 | `GetCapabilities` | Unary | `Empty` | `CapabilitiesResponse` | ?????????????? |
| 6 | `Relocalize` | Unary | `RelocalizeRequest` | `RelocalizeResponse` | ?? PCD ?? + ????????? |
| 7 | `SaveMap` | Unary | `SaveMapRequest` | `SaveMapResponse` | ??????????????? |
| 8 | `ListMaps` | Unary | `ListMapsRequest` | `ListMapsResponse` | ??????????????? |
| 9 | `DeleteMap` | Unary | `DeleteMapRequest` | `DeleteMapResponse` | ???????? |
| 10 | `RenameMap` | Unary | `RenameMapRequest` | `RenameMapResponse` | ??????? |
| 11 | `GetRuntimeConfig` | Unary | `GetRuntimeConfigRequest` | `GetRuntimeConfigResponse` | ???????? (JSON ??, 130+ ??) |
| 12 | `SetRuntimeConfig` | Unary | `SetRuntimeConfigRequest` | `SetRuntimeConfigResponse` | ???????? (?????? + ???) |

**??????**:
```
Login ? GetRobotInfo ? Relocalize ? ... ? SaveMap ? Logout
```

**??????** (`RuntimeConfig`, 130+ ??):

| ?? | ??? | ???? |
|------|--------|---------|
| motion | 4 | max_speed, max_angular_speed, autonomy_speed, cruise_speed |
| safety | 8 | stop_distance, slow_distance, obstacle_height_thre, tilt_limit_deg |
| geofence | 4 | geofence_warn_margin, geofence_stop_margin, geofence_enabled |
| path_following | 26 | yaw_rate_gain, max_accel, look_ahead_dis, stop_dis_thre |
| navigation | 7 | arrival_radius, waypoint_radius, path_tolerance |
| terrain | 28 | terrain_voxel_size, scan_voxel_size, quantile_z, use_sorting |
| local_planner | 28 | path_scale, dir_weight, check_obstacle, two_way_drive |
| SLAM | 7 | lidar_min_range, lidar_max_range, scan_resolution |
| localizer | 4 | localizer_update_hz, icp_excellent_threshold |
| global_planner | 7 | tomogram_resolution, max_heading_rate, use_quintic |
| patrol | 2 | patrol_wait_time, patrol_loop |
| telemetry | 3 | fast_state_hz, slow_state_hz, lidar_publish_freq |
| features | 3 | obstacle_avoidance_enabled, auto_speed_scale_enabled |
| geometry | 5 | vehicle_height, vehicle_width, vehicle_length |
| driver | 5 | cmd_vel_timeout_ms, auto_enable, auto_standup |
| health | 2 | health_eval_hz, health_rate_window_sec |

---

### 2.2 ControlService ? ???????

**Proto**: `control.proto`
**??**: 50051 (grpc_gateway)
**??**: ??????????????????????????????????

| # | RPC | ???? | ?? | ?? | ???? (Lease) |
|---|-----|---------|------|------|-----------------|
| 1 | `AcquireLease` | Unary | `AcquireLeaseRequest` | `AcquireLeaseResponse` | ?? lease |
| 2 | `RenewLease` | Unary | `RenewLeaseRequest` | `RenewLeaseResponse` | ??? lease |
| 3 | `ReleaseLease` | Unary | `ReleaseLeaseRequest` | `ReleaseLeaseResponse` | ??? lease |
| 4 | `SetMode` | Unary | `SetModeRequest` | `SetModeResponse` | ??? lease |
| 5 | `EmergencyStop` | Unary | `EmergencyStopRequest` | `EmergencyStopResponse` | ?? lease (?????) |
| 6 | `StreamTeleop` | **Bidi Stream** | `stream TeleopCommand` | `stream TeleopFeedback` | ??? lease |
| 7 | `StartTask` | Unary | `StartTaskRequest` | `StartTaskResponse` | ??? lease |
| 8 | `CancelTask` | Unary | `CancelTaskRequest` | `CancelTaskResponse` | ??? lease |
| 9 | `PauseTask` | Unary | `PauseTaskRequest` | `PauseTaskResponse` | ??? lease |
| 10 | `ResumeTask` | Unary | `ResumeTaskRequest` | `ResumeTaskResponse` | ??? lease |
| 11 | `GetTaskStatus` | Unary | `GetTaskStatusRequest` | `GetTaskStatusResponse` | ?? lease |
| 12 | `GetActiveWaypoints` | Unary | `GetActiveWaypointsRequest` | `GetActiveWaypointsResponse` | ?? lease |
| 13 | `ClearWaypoints` | Unary | `ClearWaypointsRequest` | `ClearWaypointsResponse` | ??? lease |

**?????** (`RobotMode`):
```
IDLE ??? MAPPING        (? lease)
IDLE ??? TELEOP         (? lease)
IDLE ??? AUTONOMOUS     (? lease + tf_ok + localization_valid)
IDLE ??? MANUAL         (?? IDLE)
?? ??? ESTOP          (EmergencyStop, ?? lease, lock-free)
ESTOP ??? IDLE          (? ClearEmergencyStop, ? tilt_safe + fence_safe)
```

**????** (`TaskType`):
```
NAVIGATION  ? ???? (? NavigationParams: waypoints + loop + max_speed)
MAPPING     ? ?? (? MappingParams: map_name + save_on_complete + resolution)
INSPECTION  ? ?? (?? loop=true)
RETURN_HOME ? ??
FOLLOW_PATH ? ???? (? FollowPathParams: waypoints + tracking_tolerance)
```

**????** (`WaypointSource`):
```
WAYPOINT_SOURCE_APP     ? ?? App (StartTask)
WAYPOINT_SOURCE_PLANNER ? ??????? (pct_path_adapter)
```

**??????**:
```
AcquireLease ? SetMode(NAVIGATION) ? StartTask(NAV, goals) ? ... ? CancelTask ? ReleaseLease
```

---

### 2.3 TelemetryService ? ???????

**Proto**: `telemetry.proto`
**??**: 50051 (grpc_gateway)
**??**: ??????? ? ???? + ???? + ????????????????

| # | RPC | ???? | ?? | ?? | ???? |
|---|-----|---------|------|------|---------|
| 1 | `StreamFastState` | **Server Stream** | `FastStateRequest` | `stream FastState` | 20-60 Hz |
| 2 | `StreamSlowState` | **Server Stream** | `SlowStateRequest` | `stream SlowState` | 1-2 Hz |
| 3 | `StreamEvents` | **Server Stream** | `EventStreamRequest` | `stream Event` | ???? |
| 4 | `AckEvent` | Unary | `AckEventRequest` | `AckEventResponse` | ? |

**FastState ??** (???):
```
pose                   ? ??: ?? + ??? (odom ???)
velocity               ? ??: ??? + ??? (body ???)
linear_acceleration    ? ???? (m/s²)
angular_velocity       ? ??? (rad/s)
rpy_deg                ? ??? (roll/pitch/yaw, ?)
tf_ok                  ? TF ??????
joint_angles           ? ???? (rad), 16 ?? FR/FL/RR/RL × 4
localization_score     ? ?????? (0-100, ? LocalizationScorer ??)
speed_scale            ? ?????? (0.0-1.0, ??????????)
```

**SlowState ??** (???):
```
current_mode           ? ???????
active_task            ? ?????? (Task)
resources              ? ????: cpu/mem/temp/battery
network                ? ????: rtt/loss/jitter/bandwidth
topic_rates            ? ????: odom/terrain/path/lidar/cmd_vel/global_path
navigation             ? ????: ?????/????/????/????/????
health                 ? ????: ???? + ?????? + ?????
geofence               ? ????: state/has_fence/margin_distance
config_json            ? ???????? (JSON, ???????)
config_version         ? ????? (???)
```

**Event ??** (`EventType`):
```
NAV_GOAL_REACHED / NAV_GOAL_FAILED / NAV_PATH_BLOCKED
SAFETY_ESTOP / SAFETY_COLLISION_WARNING / SAFETY_TILT_WARNING
SENSOR_LIDAR_FAIL / SENSOR_IMU_FAIL / SENSOR_CAMERA_FAIL / LOCALIZATION_LOST
TASK_STARTED / TASK_COMPLETED / TASK_FAILED
NETWORK_DISCONNECTED / NETWORK_RECONNECTED
SYSTEM_BOOT / SYSTEM_SHUTDOWN / MODE_CHANGE
```

---

### 2.4 DataService ? ?????????

**Proto**: `data.proto`
**??**: 50051 (grpc_gateway)
**??**: ??/??????????????????WebRTC ?????

| # | RPC | ???? | ?? | ?? | ?? |
|---|-----|---------|------|------|------|
| 1 | `ListResources` | Unary | `Empty` | `ListResourcesResponse` | ??????????????? |
| 2 | `Subscribe` | **Server Stream** | `SubscribeRequest` | `stream DataChunk` | ????/????? |
| 3 | `Unsubscribe` | Unary | `UnsubscribeRequest` | `UnsubscribeResponse` | ?????? |
| 4 | `DownloadFile` | **Server Stream** | `DownloadFileRequest` | `stream FileChunk` | ???????? (??/???) |
| 5 | `StartCamera` | Unary | `StartCameraRequest` | `StartCameraResponse` | ????? (???, ?? SDP) |
| 6 | `StopCamera` | Unary | `StopCameraRequest` | `StopCameraResponse` | ????? (???) |
| 7 | `WebRTCSignaling` | **Bidi Stream** | `stream WebRTCSignal` | `stream WebRTCSignal` | WebRTC ?????? |

**???????**:
```
POINTCLOUD / cloud_registered   ? ???? (body ???)
MAP / overall_map               ? ??????
MAP / terrain_map_ext           ? ???????
CAMERA / front                  ? ?????
```

**??????** (`SubscribeProfile`):
```
frequency             ? ???? (Hz)
compression           ? ??: NONE / LZ4 / ZSTD
max_points_per_frame  ? ????????
max_bitrate_kbps      ? ????
roi                   ? ????? (BoundingBox)
```

---

### 2.5 OtaService ? OTA ???????

**Proto**: `data.proto`
**??**: 50052 (ota_daemon, **??????**)
**??**: ???????OTA ???? (Ed25519 ?? + ???? + ??)????????

#### ??????

| # | RPC | ???? | ?? | ?? | ?? |
|---|-----|---------|------|------|------|
| 1 | `UploadFile` | **Client Stream** | `stream UploadFileChunk` | `UploadFileResponse` | ???????? (??????) |
| 2 | `ListRemoteFiles` | Unary | `ListRemoteFilesRequest` | `ListRemoteFilesResponse` | ????????? |
| 3 | `DeleteRemoteFile` | Unary | `DeleteRemoteFileRequest` | `DeleteRemoteFileResponse` | ????????? |
| 4 | `DownloadFromUrl` | **Server Stream** | `DownloadFromUrlRequest` | `stream OtaProgress` | ????? URL ?? (????????) |

#### OTA ????

| # | RPC | ???? | ?? | ?? | ?? |
|---|-----|---------|------|------|------|
| 5 | `CheckUpdateReadiness` | Unary | `CheckUpdateReadinessRequest` | `CheckUpdateReadinessResponse` | ??? (??/??/????/??/??) |
| 6 | `ApplyUpdate` | Unary | `ApplyUpdateRequest` | `ApplyUpdateResponse` | ?? OTA ?? (SHA256 + ???? + ?? + ??) |
| 7 | `GetInstalledVersions` | Unary | `GetInstalledVersionsRequest` | `GetInstalledVersionsResponse` | ?????????????? |
| 8 | `Rollback` | Unary | `RollbackRequest` | `RollbackResponse` | ????, ????? |
| 9 | `GetUpgradeHistory` | Unary | `GetUpgradeHistoryRequest` | `GetUpgradeHistoryResponse` | ???????? (??? JSONL) |
| 10 | `ValidateSystemVersion` | Unary | `ValidateSystemVersionRequest` | `ValidateSystemVersionResponse` | ???????, ??????? |

#### ????

| # | RPC | ???? | ?? | ?? | ?? |
|---|-----|---------|------|------|------|
| 11 | `GetDeviceInfo` | Unary | `Empty` | `DeviceInfoResponse` | IP/???/??/????/????/OS ?? |
| 12 | `ManageService` | Unary | `ManageServiceRequest` | `ManageServiceResponse` | start/stop/restart systemd ?? |

**????????**:
```
1. artifact_paths.yaml ?????? (name ? install_path)
2. category_defaults ???????? (model ? /home/sunrise/models/)
3. manifest target_path ????? (???: ?? ? WARNING)
```

**????**:

| ?? | ?? | ???????? |
|------|------|---------------|
| HOT | ????, ??? | ??/??, ?????? |
| WARM | ??????? | ?? (ONNX), ??? |
| COLD | ??, ??? | ??/MCU (sit + disable + ???) |

---

## 3. ROS2 ?? (???????)

> ????????????????????????????
> grpc_gateway ?????? gRPC RPC ????? ROS2 Service ???

| ??? | ???? | ??? | ?? |
|--------|---------|--------|------|
| `/relocalize` | `interface/srv/Relocalize` | Localizer | ?? PCD + ????????? |
| `/relocalize_check` | `interface/srv/IsValid` | Localizer | ?????????? |
| `/save_map` | `interface/srv/SaveMaps` | fastlio2 | ???? SLAM ??????? |
| `/pgo/save_maps` | `interface/srv/SaveMaps` | PGO | ???????????? |
| `/pgo/save_poses` | `interface/srv/SavePoses` | PGO | ????? (???) |
| `/pgo/refine_map` | `interface/srv/RefineMap` | PGO | ????? (???) |

**????** (`src/slam/interface/srv/`):

```
# Relocalize.srv
string pcd_path
float32 x, y, z, yaw, pitch, roll
---
bool success
string message
```

```
# SaveMaps.srv
string file_path
bool save_patches
---
bool success
string message
```

```
# SavePoses.srv
string file_path
---
bool success
string message
```

```
# RefineMap.srv
string maps_path
---
bool success
string message
```

```
# IsValid.srv
int32 code
---
bool valid
```

---

## 4. ROS2 ?? (???????)

### ??? SLAM ???

| ?? | ???? | ??? | ??? | ??? | ?? |
|------|---------|--------|--------|--------|------|
| `/livox/lidar` | `CustomMsg` | LiDAR ?? | fastlio2 | lidar | 10 Hz |
| `/livox/imu` | `Imu` | LiDAR ?? | fastlio2 | body | 200 Hz |
| `/Odometry` | `Odometry` | fastlio2 | ???? | odom?body | 100 Hz |
| `/cloud_registered` | `PointCloud2` | fastlio2 | localizer, PGO | body | 10 Hz |
| `/cloud_map` | `PointCloud2` | fastlio2 | terrain_analysis | odom | 10 Hz |
| `/terrain_map` | `PointCloud2` | terrain_analysis | local_planner | odom | 5 Hz |
| `/terrain_map_ext` | `PointCloud2` | terrain_analysis_ext | local_planner | odom | 5 Hz |

### ????????

| ?? | ???? | ??? | ??? | ??? |
|------|---------|--------|--------|--------|
| `/way_point` | `PointStamped` | pct_adapters / TaskManager | local_planner | odom |
| `/pct_path` | `Path` | pct_planner | pct_adapters | map |
| `/path` | `Path` | local_planner | pathFollower | body |
| `/cmd_vel` | `TwistStamped` | pathFollower / SafetyGate | robot_driver | body |
| `/slow_down` | `Int8` | local_planner | pathFollower | ? |
| `/stop` | `Int8` | ???? (????) | pathFollower | ? |
| `/joy` | `Joy` | ??/App | local_planner | ? |
| `/speed` | `Float32` | ???? | local_planner | ? |

### ?????

| ?? | ???? | ??? | ?? |
|------|---------|--------|------|
| `/robot_state` | `RobotState` | robot_driver | ????/??/IMU/??? |
| `/localization_quality` | `Float32` | localizer | ???? ICP fitness ?? |
| `/pct_planner/status` | `String` | pct_planner | ??????? |

### TF ???

| ?? | ??? | ?? | ?? |
|------|--------|------|------|
| `map ? odom` | PGO / Localizer | 10-20 Hz | ???????? |
| `odom ? body` | fastlio2 | 100 Hz | ?????? |
| `body ? lidar` | ?? | ? | ??????? (??) |

---

## 5. ?????????

### RobotState.msg

```
std_msgs/Header header
float32[12] joint_positions             # ???? (rad), FR/FL/RR/RL × hip/thigh/calf
float32[12] joint_velocities            # ???? (rad/s)
float32[12] joint_efforts               # ???? (N·m)
BatteryState battery                    # ????
float32[4] foot_forces                  # ???, FR/FL/RR/RL
float32[4] imu_quaternion               # ????? w/x/y/z
float32[3] imu_gyroscope                # ??? (rad/s)
float32[3] imu_accelerometer            # ??? (m/s²)
int8 imu_temperature                    # IMU ?? (°C)
```

### BatteryState.msg

```
uint8 percentage                        # ????? SOC 0-100%
float32 voltage                         # ?? (V)
float32 current                         # ?? (A)
int8[2] temperature                     # ???? (°C)
uint8 status                            # 0=normal, 1=charging, 2=low, 3=critical
uint16 cycle_count                      # ???????
```

---

## 6. ?????

```
map (???????)  ? PGO/Localizer ??
  ??? odom (??????)  ? ? LIO ??????????
        ??? body (????????)  ? ??/????
              ??? lidar (??????)  ? ??????
```

| ??? | ?????? | X ??? | Z ??? |
|--------|------------|---------|---------|
| map | ????/???? | ? | ?? |
| odom | ????, pct_adapters | ????? | ?? |
| body | ????, pathFollower | ????? | ?????? |

---

## 7. ?????

```protobuf
enum ErrorCode {
    ERROR_CODE_UNSPECIFIED = 0;
    ERROR_CODE_OK = 1;
    ERROR_CODE_INVALID_REQUEST = 2;
    ERROR_CODE_UNAUTHORIZED = 3;
    ERROR_CODE_FORBIDDEN = 4;
    ERROR_CODE_RESOURCE_NOT_FOUND = 5;
    ERROR_CODE_RESOURCE_CONFLICT = 6;
    ERROR_CODE_SERVICE_UNAVAILABLE = 7;
    ERROR_CODE_INTERNAL_ERROR = 8;
    ERROR_CODE_TIMEOUT = 9;
    ERROR_CODE_RATE_LIMITED = 10;

    // ???????
    ERROR_CODE_LEASE_REQUIRED = 2000;
    ERROR_CODE_LEASE_CONFLICT = 2001;
    ERROR_CODE_LEASE_EXPIRED = 2002;
    ERROR_CODE_SAFETY_STOP = 2003;
    ERROR_CODE_MODE_CONFLICT = 2004;
}
```

**OTA ???** (`OtaFailureCode`):

| ? | ?? | ?? |
|----|------|------|
| 0 | `NONE` | ??? |
| 1 | `NETWORK` | ???? |
| 2 | `SHA256_MISMATCH` | ???? |
| 3 | `SIGNATURE_INVALID` | Ed25519 ???? |
| 4 | `DISK_FULL` | ???? |
| 5 | `DEPENDENCY` | ????? |
| 6 | `INSTALL_SCRIPT` | ?????? |
| 7 | `HEALTH_CHECK` | ????????? |
| 8 | `BATTERY_LOW` | ???? |
| 9 | `HW_INCOMPAT` | ????? |
| 10 | `SAFETY_MODE` | ??????? |
| 11 | `PERMISSION` | ???? |
| 12 | `ROLLBACK_FAILED` | ????? |

---

## 8. ??? SDK ??

### ????: ?? API Reference ?? (??? 48 ? RPC)
### ????: ???????? SDK ??

```
RobotSDK
  ??? connection
  ?     ??? connect(host, port=50051, otaPort=50052)
  ?     ??? disconnect()
  ?     ??? isConnected
  ??? auth                                                     ? SystemService
  ?     ??? login(user, pass)
  ?     ??? logout()
  ?     ??? heartbeat()
  ??? info                                                     ? SystemService + OtaService
  ?     ??? getRobotInfo()                                 ? SystemService.GetRobotInfo
  ?     ??? getCapabilities()                              ? SystemService.GetCapabilities
  ?     ??? getDeviceInfo()                                ? OtaService.GetDeviceInfo
  ??? config                                                   ? SystemService
  ?     ??? getRuntimeConfig()                             ? SystemService.GetRuntimeConfig
  ?     ??? setRuntimeConfig(json, fields?)                ? SystemService.SetRuntimeConfig
  ??? control                                                  ? ControlService
  ?     ??? acquireLease() / releaseLease()
  ?     ??? setMode(mode)
  ?     ??? emergencyStop()
  ?     ??? teleop(velocityStream) ? feedbackStream
  ??? task                                                     ? ControlService
  ?     ??? start(type, params)
  ?     ??? cancel(id) / pause(id) / resume(id)
  ?     ??? getStatus(id)
  ?     ??? getActiveWaypoints()
  ?     ??? clearWaypoints()
  ??? map                                                      ? SystemService
  ?     ??? relocalize(pcdPath, pose)
  ?     ??? save(filePath)
  ?     ??? list() / delete(name) / rename(old, new)
  ?     ??? download(name) ? stream                        ? DataService.DownloadFile
  ??? telemetry                                                ? TelemetryService
  ?     ??? streamPose(hz) ? Stream<FastState>
  ?     ??? streamStatus() ? Stream<SlowState>
  ?     ??? streamEvents() ? Stream<Event>
  ?     ??? ackEvent(id)
  ??? data                                                     ? DataService
  ?     ??? listResources()
  ?     ??? subscribe(resource) ? Stream<DataChunk>
  ?     ??? video
  ?           ??? startWebRTC(config) ? signalingStream
  ?           ??? stop()
  ??? ota                                                      ? OtaService (port 50052)
        ??? upload(bytes, path) ? progress
        ??? downloadFromUrl(url) ? Stream<Progress>
        ??? checkReadiness(artifacts)
        ??? apply(artifact, stagedPath)
        ??? getInstalled(category?)
        ??? rollback(artifactName)
        ??? getHistory(limit?)
        ??? validateVersion(expected)
        ??? files
        ?     ??? list(dir)
        ?     ??? delete(path)
        ??? service
              ??? getStatus(name)
              ??? manage(name, action)
```

### RPC ????

| ?? | ?? | RPC ?? |
|------|------|---------|
| SystemService | 50051 | 12 |
| ControlService | 50051 | 13 |
| TelemetryService | 50051 | 4 |
| DataService | 50051 | 7 |
| OtaService | 50052 | 12 |
| **??** | | **48** |

### ????????

| ??? | ?? | ?? |
|--------|------|------|
| **P0** | ?? API Reference ?? (???) | ????? |
| **P1** | Flutter SDK ?? (`RobotSDK` ??) | App ????, ?????? |
| **P2** | Python SDK (??/???/????) | `grpcurl` ??, Python ????? |
| **P3** | ?????? (envoy/nginx ??) | ????, ????????? |

---

*Proto ???: `src/robot_proto/proto/{common,system,control,telemetry,data}.proto`*
*ROS2 ????: `src/slam/interface/{srv,msg}/`*
